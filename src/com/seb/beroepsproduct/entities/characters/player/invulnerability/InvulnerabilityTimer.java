package com.seb.beroepsproduct.entities.characters.player.invulnerability;

import com.github.hanyaeger.api.Timer;
import com.seb.beroepsproduct.entities.characters.player.Player;

/**
 * A {@link Timer} to give the {@link Player} invulnerability so he could get out of harms way.
 * Removes itself after 6 seconds when created
 */
public class InvulnerabilityTimer extends Timer {

	private Player player;
	private long previousTimestamp;

	/**
	 * Creates a {@link InvulnerabilityTimer} and removes itself after 6 seconds
	 * @param player The {@link Player} that gets the invulnerability
	 * @param intervalInMs The interval in milliseconds for checking
	 */
	public InvulnerabilityTimer(Player player, long intervalInMs) {
		super(intervalInMs);
		this.player = player;
	}

	@Override
	public void onAnimationUpdate(long timestamp) {
		if (previousTimestamp == 0) {
			previousTimestamp = timestamp;
		}

		if (timestamp - previousTimestamp > 6000000000d) {
			player.setVulnerable(true);
			remove();
		}
	}

}
